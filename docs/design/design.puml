@startuml
package presentation
{
    +class Main
    {
        +main(args : String[]) : void
    }
}

package domain
{
    package stylecheck
    {
        +class ClassStyleRevisionManager
        {
            -revisers : List<ClassStyleReviser>
            -revisionPrinter : StyleRevisionPrinter

            +ClassStyleRevisionManager(output : OutputStream)

            +addStyleReviser(reviser : ClassStyleReviser) : void
            +removeStyleReviser(reviser : ClassStyleReviser) : void
            +generateReport(classNodes : List<DomainClassNode>) : void
            +revise(classNode : DomainClassNode) : void
            -reviseClassName(classNode : DomainClassNode) : void
            -reviseClassName(innerClassNode : DomainInnerClassNode) : void
            -reviseField(field : DomainFieldNode) : void
            -reviseMethod(method : DomainMethodNode) : void
            -reviseInnerClass(innerClass : DomainInnerClassNode) : void
            -printRevisions() : void
        }

        ~abstract class ClassStyleReviser
        {
            -revisions : List<StyleRevision>

            ~{final} checkClassName(name : String) : boolean
            ~{final} checkVariableOrMethodName(name : String) : boolean
            ~{final} checkStaticConstantName(name : String) : boolean
            ~{abstract} checkClassNameInternal(name : String, revisionBuilder : StyleRevision::Builder) : boolean
            ~{abstract} checkVariableOrMethodNameInternal(name : String, revisionBuilder : StyleRevision::Builder) : boolean
            ~{abstract} checkStaticConstantNameInternal(name : String, revisionBuilder : StyleRevision::Builder) : boolean
            ~{final} saveRevision(revision : StyleRevision) : void
            ~{final} getRevisions() : List<StyleRevision>
            -validateNameInput(name : String) : void
        }

        +class NamingConventionStyleReviser
        {
            ~checkClassNameInternal(name : String, revisionBuilder : StyleRevision::Builder) : boolean
            ~checkVariableOrMethodNameInternal(name : String, revisionBuilder : StyleRevision::Builder) : boolean
            ~checkStaticConstantNameInternal(name : String, revisionBuilder : StyleRevision::Builder) : boolean
        }

        +class ReadableNamingStyleReviser
        {
            ~checkClassNameInternal(name : String, revisionBuilder : StyleRevision::Builder) : boolean
            ~checkVariableOrMethodNameInternal(name : String, revisionBuilder : StyleRevision::Builder) : boolean
            ~checkStaticConstantNameInternal(name : String, revisionBuilder : StyleRevision::Builder) : boolean
            -checkReadability(name : String, revisionBuilder : StyleRevision::Builder) : boolean
            -isReadable(name : String) : boolean
        }

        ~class StyleRevision
        {
            -originalName : String
            -issueLocation : String
            -issueDetails : String
            -suggestedFix : String

            ~getOriginalName() : String
            ~getIssueLocation() : String
            ~getIssueDetails() : String
            ~getSuggestedFix() : String
        }

        ~class StyleRevision::Builder <<static>>
        {
            ~withOriginalName(originalName : String) : StyleRevision::Builder
            ~withIssueLocation(issueLocation : String) : StyleRevision::Builder
            ~withIssueType(issueType : String) : StyleRevision::Builder
            ~withSuggestedFix(suggestedFix : String) : StyleRevision::Builder
            ~build() : StyleRevision
        }

        ~abstract class StyleRevisionPrinter
        {
            -output : OutputStream

            ~StyleRevisionPrinter(output : OutputStream)
            ~{final} print(data : String) : void
            ~{abstract} print(revision : StyleRevision, to : OutputStream) : void
        }

        +class BasicStyleRevisionPrinter
        {
            ~print(revision : StyleRevision, to : OutputStream) : void
        }
    }

    package classdiagram
    {
        +class PlantUMLGenerator
        {
            -output : OutputStream

            +PlantUMLGenerator(output : OutputStream)

            +generateClassDiagram(classNodes : List<ClassNode>) : void
            -generateClass(node : DomainClassNode) : String
            -generateField(field : DomainFieldNode) : String
            -generateMethod(method : DomainMethodNode, className : String) : String
            -generateInnerClass(innerClass : DomainInnerClassNode) : String
            -generateDependencies(classNodes : List<ClassNode>) : String
            -getAccessModifierTokens(accessModifiers : List<String>) : String
            -getAccessModifierTokens(accessModifiers : List<String>, className : boolean) : String
        }
    }

    package dependencycheck {

        +class CyclicDependencyChecker
        {
            -output : OutputStream

            +CyclicDependencyChecker(output : OutputStream)
            +generateReport(classNodes : List<DomainClassNode>) : void
            -buildGraph(classNodes : List<DomainClassNode>) : Graph<DomainClassNode>
            -checkGraph(graph : Graph<DomainClassNode>) : List<String>
        }

        -class CyclicDependencyChecker::Graph<T> <<static>>
        {
            ~nodes : Set<T>
            ~edges : Set<List<T, T>>

            ~addEdge(<List<T, T>) : void
            ~getNeighbors(node : T) : Set<T>
        }

    }

    package util
    {
        +class DomainClassNode
        {
            ~name : String
            ~accessModifiers : List<String>
            ~fields : List<DomainFieldNode>
            ~methods : List<DomainMethodNode>
            ~innerClasses : List<DomainInnerClassNode>

            +getName() : String
            +getAccessModifiers() : List<String>
            +getFields() : List<DomainFieldNode>
            +getMethods() : List<DomainMethodNode>
            +getInnerClasses() : List<DomainInnerClassNode>
        }

        +class DomainFieldNode
        {
            ~name : String
            ~accessModifiers : List<String>
            ~type : String

            +getName() : String
            +getAccessModifiers() : List<String>
            +getType() : String
        }

        +class DomainMethodNode
        {
            ~name : String
            ~accessModifiers : List<String>
            ~parameterNames : List<String>
            ~parameterTypes : List<String>
            ~returnType : String

            +getName() : String
            +getAccessModifiers() : List<String>
            +getParameterNames() : List<DomainFieldNode>
            +getParameterTypes() : List<DomainFieldNode>
            +getReturnType() : String
        }

        +class DomainInnerClassNode
        {
            ~name : String
            ~accessModifiers : List<String>

            +getName() : String
            +getAccessModifiers() : List<String>
        }

        +interface DomainClassNodeCreator<T>
        {
            +{abstract} createDomainClassNode(classNode : ClassNode) : DomainClassNode
        }

        +interface DomainFieldNodeCreator<T>
        {
            +{abstract} createDomainFieldNode(fieldNode : FieldNode) : DomainFieldNode
        }

        +interface DomainMethodNodeCreator<T>
        {
            +{abstract} createDomainMethodNode(methodNode : MethodNode, localClassName : String) : DomainMethodNode
        }

        +interface DomainInnerClassNodeCreator<T>
        {
            +{abstract} createDomainInnerClassNode(innerClassNode : InnerClassNode) : DomainInnerClassNode
        }

        +class ASMToDomainNodeConverter
        {
            +createDomainClassNode(classNode : ClassNode) : DomainClassNode
            +createDomainFieldNode(fieldNode : FieldNode) : DomainFieldNode
            +createDomainMethodNode(methodNode : MethodNode, localClassName : String) : DomainMethodNode
            +createDomainInnerClassNode(innerClassNode : InnerClassNode) : DomainInnerClassNode
            -getLocalClassName(internalName : String) : String
            -getAccessModifierStrings(access : int) : List<String>
        }

        +class DomainTypeUtil
        {
            +{static} splitIntoSignificantTypes(name : String) : List<String>
        }

        +enum PrimitiveType
        {
            BOOLEAN("boolean"),
            CHAR("char"),
            BYTE("byte"),
            SHORT("short"),
            INT("int"),
            FLOAT("float"),
            LONG("long"),
            DOUBLE("double"),
            VOID("void")

            -PrimitiveType(name : String)
            +{static} tryGetValue(name : String) : PrimitiveType
            +{static} hasValue(name : String) : boolean
            +toString() : String
        }
    }
}

package asm
{
    +class ClassNode
    {
    }

    +class FieldNode
    {
    }

    +class MethodNode
    {
    }

    +class InnerClassNode
    {
    }
}

Main ..> ASMToDomainNodeConverter
Main ..> ClassStyleRevisionManager
Main ..> PlantUMLGenerator
Main ..> CyclicDependencyChecker
Main ..> DomainClassNode

Main ..> asm

ASMToDomainNodeConverter ..> DomainClassNode
ASMToDomainNodeConverter ..> DomainFieldNode
ASMToDomainNodeConverter ..> DomainMethodNode
ASMToDomainNodeConverter ..> DomainInnerClassNode
ASMToDomainNodeConverter ..> ClassNode
ASMToDomainNodeConverter ..> FieldNode
ASMToDomainNodeConverter ..> MethodNode
ASMToDomainNodeConverter ..> InnerClassNode
DomainClassNode --> DomainFieldNode
DomainClassNode --> DomainMethodNode
DomainClassNode --> DomainInnerClassNode
DomainClassNode ..> DomainFieldNode
DomainClassNode ..> DomainMethodNode
DomainClassNode ..> DomainInnerClassNode
DomainTypeUtil ..> PrimitiveType
ASMToDomainNodeConverter ..|> DomainClassNodeCreator
ASMToDomainNodeConverter ..|> DomainFieldNodeCreator
ASMToDomainNodeConverter ..|> DomainMethodNodeCreator
ASMToDomainNodeConverter ..|> DomainInnerClassNodeCreator
DomainClassNodeCreator .u.> DomainClassNode
DomainFieldNodeCreator .u.> DomainFieldNode
DomainMethodNodeCreator .u.> DomainMethodNode
DomainInnerClassNodeCreator .u.> DomainInnerClassNode

ClassStyleRevisionManager --> ClassStyleReviser
ClassStyleRevisionManager --> StyleRevisionPrinter
ClassStyleRevisionManager ..> DomainClassNode
ClassStyleRevisionManager ..> DomainFieldNode
ClassStyleRevisionManager ..> DomainMethodNode
ClassStyleRevisionManager ..> DomainInnerClassNode
NamingConventionStyleReviser --|> ClassStyleReviser
ReadableNamingStyleReviser --|> ClassStyleReviser
StyleRevision +-- StyleRevision::Builder
ClassStyleReviser --> StyleRevision
NamingConventionStyleReviser ..> StyleRevision
ReadableNamingStyleReviser ..> StyleRevision
ClassStyleReviser ..> StyleRevision::Builder
NamingConventionStyleReviser ..> StyleRevision::Builder
ReadableNamingStyleReviser ..> StyleRevision::Builder
StyleRevisionPrinter ..> StyleRevision
BasicStyleRevisionPrinter -l-|> StyleRevisionPrinter

PlantUMLGenerator ..> DomainClassNode
PlantUMLGenerator ..> DomainFieldNode
PlantUMLGenerator ..> DomainMethodNode
PlantUMLGenerator ..> DomainTypeUtil

CyclicDependencyChecker +-- CyclicDependencyChecker::Graph
CyclicDependencyChecker ..> DomainClassNode
CyclicDependencyChecker ..> DomainFieldNode
CyclicDependencyChecker ..> DomainMethodNode
CyclicDependencyChecker ..> DomainTypeUtil
@enduml